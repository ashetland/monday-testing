name: Issue Notifications
on:
  issues:
    types: [labeled]
jobs:
  determine-action:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read
    steps:
      - uses: actions/checkout@v4

      - name: "Assign for verification"
        if: github.event.label.name == '4 - installed'
        uses: actions/github-script@v7
        env:
          ISSUE_VERIFIERS: "isaacbraun,DitwanP,geospatialem"
          CALCITE_DESIGNERS: "ashetland"
        with:
          script: |
            const action = require('${{ github.workspace }}/.github/scripts/assignForVerification.js')
            await action({github, context, core})

      - name: "Spike complete notification"
        if: github.event.label.name == 'spike complete'
        run: echo "Spike complete notification fired"

      - name: "Ready for dev notification"
        if: github.event.label.name == 'ready for dev'
        run: echo "Ready for dev notification fired"

      - name: "New component notification"
        if: github.event.label.name == 'new component'
        run: echo "New component notification fired"

      - name: "Icon request notification"
        if: github.event.label.name == 'calcite-ui-icons'
        run: echo "Icon request notification fired"
